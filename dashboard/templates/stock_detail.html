{% extends "base.html" %}

{% block title %}{{ stock_info.ticker }} - Stock Detail{% endblock %}

{% block content %}
<div class="stock-detail">
    <div class="breadcrumb">
        <a href="{{ url_for('index') }}">← Back to Dashboard</a>
    </div>

    <div class="stock-header">
        <h2>{{ stock_info.ticker }} - {{ stock_info.company_name }}</h2>
        <p class="stock-meta">
            <span>{{ stock_info.sector or 'N/A' }}</span> • 
            <span>{{ stock_info.industry or 'N/A' }}</span> • 
            <span>{{ stock_info.country or 'N/A' }}</span>
        </p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <h3>${{ stats.latest_price }}</h3>
            <p>Current Price</p>
        </div>
        <div class="stat-card">
            <h3>${{ stats.avg_price }}</h3>
            <p>Average Price</p>
        </div>
        <div class="stat-card">
            <h3>${{ stats.max_price }}</h3>
            <p>High</p>
        </div>
        <div class="stat-card">
            <h3>${{ stats.min_price }}</h3>
            <p>Low</p>
        </div>
        <div class="stat-card">
            <h3>{{ stats.avg_volume }}</h3>
            <p>Avg Volume</p>
        </div>
    </div>

    <div class="section">
        <h3>Price History</h3>
        {{ price_chart|safe }}
    </div>

    <div class="section">
        <h3>Trading Volume</h3>
        {{ volume_chart|safe }}
    </div>

    <div class="section">
        <h3>Historical Data</h3>
        <div class="table-scroll">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Open</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Close</th>
                        <th>Volume</th>
                        <th>Change %</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in price_data|reverse %}
                    <tr>
                        <td>{{ row.date }}</td>
                        <td>${{ "%.2f"|format(row.open_price) }}</td>
                        <td>${{ "%.2f"|format(row.high_price) }}</td>
                        <td>${{ "%.2f"|format(row.low_price) }}</td>
                        <td>${{ "%.2f"|format(row.close_price) }}</td>
                        <td>{{ "{:,.0f}".format(row.volume) }}</td>
                        <td class="{% if row.price_change_percent > 0 %}positive{% else %}negative{% endif %}">
                            {{ "%.2f"|format(row.price_change_percent) }}%
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
